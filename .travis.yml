language: rust
sudo: false
cache: cargo

rust:
  - stable
script:
  - cargo build --verbose --release --workspace --manifest-path src/Cargo.toml



matrix:
  # Performance tweak
  fast_finish: true

  include:
    # Linux
    #- env: TARGET=x86_64-unknown-linux-musl

    # OSX
    - env: TARGET=x86_64-apple-darwin
      os: osx
    #- env: TARGET=aarch64-apple-darwin
    #  os: osx
      
    # Windows
    #- env: TARGET=x86_64-pc-windows-gnu

deploy:
  - provider: releases
    skip_cleanup: true
    edge: true
    on:
      tags: true
      #condition: "$TRAVIS_RUST_VERSION = stable"
      #branch: master
    file: target/release/dclias
    api_key:
      secure: "IoIQ0NBQbGFJKqKqX1HWW91ES9BoJn5j3Q1ZqN07vqG+KK4cTSDKIlO76+phH9gkkFAEeVAAhjTlIawcn6twYHv/81VqmglgkcYJClJXpiX3b7zR8pdpt7/+7uYGp2HGcCatB61GDlFpfbj7koL/GcDoA6pQ0njvrpLYSz+D6y4FDFDckccTet62x9U4FtVO3kais+c95ktp+3LLUCdi27Mghzk7XoZo7JFbbcbYFO9hCDD2V1DAvC2kRXJicL8NghWTFD+zWh40OxgvD4MT229sCIuZPEnNyCcSMhVz/F0BZwVzfdLEnGItRrZ2mw4G+ccIuNWskAP+FFqw3R0R1qx4IOTZ1ZwA0Hvi9+MCXOKl8p2r342keQuUIcV2u15e0qAwC5H/TmkP93cT0DxDcEIFsq0MDbDOVLSqKutZGuw3T0kfpYalg3JlmO7I3hV1Kk/tiuqrHv00u+4AXzVCVE+PxLkd/TvcnDrmjZoIVwm8ELdpw3UK4a7nWgyCnZLXMo+sa46QAm6uVHfcSUZ469UJcct42GXg7o2zcLW0t8iMlvE/1QSpTYSPbD1QNiSxYNHPdLBdExmpOeWK9TQdtuqqEt9oAKiu+Zp4Eeyy+/9EqhFQVrYQL02FLAjdKuRI8w1d6DILUmObUCXrb/EWX3oxkBCAM3rSRS/4oPQ5+z4="